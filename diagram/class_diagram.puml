@startuml

class ReserveSystem{
    -branch_list : list
    -customer_list : list
    -staff_list : list
    -policy : list
    +add_customer()
    +search_customer()
    +get_transaction()
    +check_in()
    +process_cancellation()
    +create_reservation()
    +notify_user()
    +update_room_status()
    +make_customer_id() : str
    +make_branch_id(name) : str
    +add_staff()
    +remove_staff()
    +add_penalty()
    +add_transaction()
}

class Branch{
    -name : str
    -branch_id : str
    -room_list : list
    -officer_list : list
    -equipment_list : list
    +id(): str
    +name() : str
    +room() : list
    +room(new_room) : void
    +equipment() : list
    +equipment(new_equipment) : void
    +get_available_slot(size, date) : list
}

class RoomEquipmentStatus <<enumeration>>{
    AVAILABLE
    RESERVED
    OCCUPIED
    MAINTENANCE
}
class Room {
    -room_id : str
    -time_slot : list
    -size : str
    -rate : float
    -eq_quota : int
    ' -size : str
    ' -room_status : enum
}


class Time_slot{
    -date : datetime
    -start_time : datetime
    -end_time : datetime
    -status : str
}


class Equipment{
    -eq_id : str
    -time_slot : list
    -size : int
    +id() : str
}



class BookingStatus <<enumeration>> {
    ORDERED
    CONFIRMED
    CANCELLED
}

class Booking {
    -booking_id : str
    -time_booking : datetime
    -customer : class
    ' -time_slot : class
    -room_id : str
    -equipment_list : list
    -created_at : datetime
    -status : Enum
    -price : float

    +add_equipment() : void
    +remove_equipment(): void
    +change_room() : void
    +change_time_slot() : void
    +calculate_price() : float
    +change_booking_status() : void
}

class ServiceStatus <<enumeration>> {
    PENDING_PAYMENT
    PAID
    CANCELLED
    REFUNDED
}

' คือ ที่เก็บของการจองใน 1 ครั้งว่ามีห้องอะไรบ้าง
class Service_IN{
    -reserve_id : str
    -customer : class
    -booking_list : list
    -total_price : float
    +add_booking() : void
    +remove_booking() : void
    +calculate_total() : float
    +change_status() : void
}


class PaymentChannel{
    +process() : bool
}

class QrScan{
    -qr_image : str
    +generate_qr()
}

class CreditCard{
    -card_number : str
    -cvv : str
    +validate_card()
}

class Payment{
    -Service : class
    -coupon : class
    -fine : float
    -refund : float
    -payment_channel : class
    -payment_status : Enum
    -total_price : float 
    +process_payment()
    +payment_refund()
    +calculate_total()
}
class TransStatus <<enumeration>> {
    PENDING
    CHECK_IN
    COMPLETED
    CANCELLED
    FAILED
}

' class Transaction{
'     -transaction_id : str
'     -timestamp : datetime
'     -type : str
'     -status : enum
'     +check_cancel_rule()
'     +check_cancel_rule()
'     +do_checkin()
'     +do_checkout()
'     +get_reserve_detail()
' }


class User{
    -user_id : str
    -username : str
    -password : str
    -name : str
    -email : str
    -phone : str
    -birthday : datetime
    +log_in()
    +log_out()
    +verify_password()
    +update_profile()
    +change_password()
    +search_transaction()
}

class Staff{
    -branch_id : str
    -daily_report : list
    +get_report()
    +set_status() 
    +add_Daily_report()
    +customer_check_in()
    +customer_check_out()
}


class Customer{
    -current_points : int
    ' -booking_history : list
    -coupon_list : list
    -reserve_list : list 
    -membership 
    +redeem_point()
    +Booking_room()
    +Report_room()
}

class Standard{
    -receive_point_per_hr : int (3)
    +redeem_point()
    +get_cancellation_limit_hours() : int { return 24 }
}

class Premium{
    -receive_point_per_hr : int (5)
    +redeem_point()
    +get_cancellation_limit_hours() : int { return 12 }
}

class Diamond{
    -receive_point_per_hr : int (8)
    +redeem_point()
    +get_cancellation_limit_hours() : int { return 6 }
}

class PenaltyType <<enumeration>> {
    NO_SHOW
    CANCEL_LATE
    DAMAGE
}

class PenaltyStatus <<enumeration>> {
    PENDING      
    APPLIED          
}

class Penalty {
    -date :str
    -reason :str
    - penalty_id : str
    - type : Enum 
    - amount : float
    - created_at : datetime
    - status : Enum 
    - booking : Booking
    +change_penalty_status()
}

class Policy{
    - policy_id : str
    - name : str
    - description : str
    - cancel_before_hours : int
    - rate : float
    - active : bool
    +check_cancel_rule() : void
    + is_refundable() : bool
}

class NotiStatus <<enumeration>>{
    PENDING
    SENT
    FAILED
}

class Notification{
    -notification_id: str
    -user : str
    -order : class
    -message: str
    -is_read: bool
    -status : enum
    +send()
    +format_massage()
    +mark_as_read()
    +retry_send()
}

class Service_OUT {
    -product_list : list
    -penalty_list : list
    -total_price : float
    +calculate_total_price()
}


class Coupon{
    -expired_date : datetime
    -discount : float
}

'to service_out
class SnackNDrinks{ 
    -name
    -price
}

class Stock{
    -product_list
    +add_product
    +remove_product
}


class RoomType <<enumeration>>{
    S
    M
    L
    XL
}

class EquipmentType <<enumeration>> {
    ELECTRICGUITAR
    ACOUSTICGUITAR
    DRUM
    MICROPHONE
    BASS
    KEYBOARD
}

class SnackNDrinkType <<enumeration>> {
    WATER
    COFFEE
    COKE
    CHOCOPIE
    LAY
    TARO
}

class MemberShip <<enumeration>> {
    STANDARD
    PREMIUM
    DIAMOND
}




ReserveSystem o-- User
ReserveSystem o-- Stock
Stock o-- SnackNDrinks
User <|-- Staff
User <|-- Customer
Customer <|-- Standard
Customer <|-- Premium
Customer <|-- Diamond
Payment <|-- PaymentChannel 
PaymentChannel <|-- QrScan
PaymentChannel <|-- CreditCard
ReserveSystem o-- Branch
ReserveSystem o-- Policy
Customer o-- Coupon
Branch o-- Room
Branch o-- Equipment
Room o-- Time_slot
Equipment o-- Time_slot
Service_IN o-- Booking
' Customer o-- Transaction
Customer o-- Notification
Service_IN <-- Payment
Booking <-- Room
Booking o-- Equipment
Booking o-- SnackNDrinks
Branch o-- SnackNDrinks
Service_OUT o-- Penalty
Customer o-- Service_OUT
Customer o-- Service_IN
SnackNDrinks <-- Stock
@enduml