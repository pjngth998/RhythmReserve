@startuml

class ReserveSystem{
    -branch_list : list
    -policy : class
    -process_cancellation()
    
}

class Branch{
    -name : str
    -id : str
    -max_room : str
    -room_list : list
    -officer_list : list
    -equipment_list : list

}

class Room {
    -room_id : str
    -time_slot : class
    -price : int
    -time_slot : list
    -rate : float
    -eq_quota : int
}


class Time_slot{
    -room : class
    -equipment : class
    -start_time : datetime
    -end_time : datetime
    -status : str
    -set_status()
}

class SmallRoom{
    
}

class MediumRoom{

}

class LargeRoom{

}

class ExtralargeRoom{
    
}

class Equipment{
    -eq_id : str
    -time_slot : class
    -price : int

}



class BookingStatus <<enumeration>> {
    ORDERED
    CONFIRMED
    CANCELLED
}

class Booking {
    -booking_id : str
    -customer : class
    -room : class
    -time_slot : class
    -equipment_list : list
    -created_at : datetime
    -status : Enum
    -price : float

    +add_equipment() : void
    +remove_equipment(): void
    +change_room() : void
    +change_time_slot() : void
    +calculate_price() : float
    +change_booking_status() : void
}

class OrderStatus <<enumeration>> {
    PENDING_PAYMENT
    PAID
    CANCELLED
    REFUNDED
}

class Order {
    -order_id : str
    -customer : class
    -booking_list : list
    -created_at : datetime
    -status : Enum
    -total_price : float
    -coupon : Coupon

    +add_booking() : void
    +remove_booking() : void

    +calculate_total() : float
    +apply_coupon() : void

    +change_status() : void
}


class PaymentChannel{
    process() : bool
}

class QrScan{
    -qr_image : str
    -generate_qr()
}

class CreditCard{
    -card_number : str
    -cvv : str
    -validate_card()
}

class Payment{
    -payment_id : str
    -order : class
    -coupon : class
    -fine : class
    -refund : class
    -payment_channel : class
    -payment_status : str
    -amount : float
    -process_payment()
    -payment_refund()

}

class Transaction{
    -timestamp : datetime
    -order : class
    -type : str
    -check_cancel_rule()

}

class UserRole <<enumeration>> {
    ADMIN
    STAFF
    CUSTOMER
}

class User{
    -user_id : str
    -username : str
    -password : str
    -name : str
    -email : str
    -phone : str
    -age : int
    -transaction_ls : list
    -role : enum
    +verify_password()
    +update_profile()
    +change_password()
    +add_transaction()
    +search_transaction()

}

class Officer{

}

class BranchManager{

}

class FrontDesk{

}

class SystemAdmin{

}

class Customer{

}

class Standard{

}

class Premium{

}

class Diamond{

}

class PenaltyType <<enumeration>> {
    NO_SHOW
    CANCEL_LATE
    DAMAGE
}

class PenaltyStatus <<enumeration>> {
    PENDING      // รอชำระ
    APPLIED      // หักเงินแล้ว
    WAIVED       // ยกเว้นค่าปรับ
}

class Penalty {
    -date :str
    -amount :float
    -reason :str
    - penalty_id : str
    - type : Enum (CANCEL_LATE, NO_SHOW, DAMAGE)
    - rate : float (เช่น 0.5 = 50%)
    - fixed_amount : float
    - created_at : datetime
    - status : Enum 
    - booking : Booking
    +change_penalty_status()
}

class Policy{
    - policy_id : str
    - name : str
    -penalty_list : list
    - description : str
    - cancel_before_hours : int
    - refund_rate : float
    - no_show_rate : float
    - active : bool
    +check_cancel_rule() : void
    +get_all_penalty() : void
    +add_penalty() : void
    + calculate_penalty() : class
    + calculate_refund() : float
    + is_refundable() : bool
}

class Notification{
    -user : class
    -order : class

}



class Coupon{
    -expired_date : datetime
    -discount : float

}

class RoomType <<enumeration>>{
    S
    M
    L
    XL
}

class EquipmentType <<enumeration>> {
    EGTR
    AGTR
    BS
    MC
    KB
    DM
}



User <|-- Officer
User <|-- Customer
Customer <|-- Standard
Customer <|-- Premium
Customer <|-- Diamond
Officer <|-- BranchManager
Officer <|-- FrontDesk
Officer <|-- SystemAdmin
Payment <|-- PaymentChannel 
PaymentChannel <|-- QrScan
PaymentChannel <|-- CreditCard
ReserveSystem o-- Branch
ReserveSystem o-- Policy
Customer o-- Coupon
Branch o-- Room
Branch o-- Equipment
Room o-- Time_slot
Equipment o-- Time_slot
Customer o-- order
Order o-- Booking
Customer o-- Transaction
Customer o-- Notification
Order <-- Payment
Room --* RoomType
Equipment --* EquipmentType 
PaymentChannel <-- Payment
Policy o-- Payment
Transaction <-- Payment
@enduml